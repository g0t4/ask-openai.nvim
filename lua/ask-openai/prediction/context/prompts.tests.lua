local prompts = require("ask-openai.prediction.context.prompts")
require('ask-openai.helpers.testing')

describe("parse_includes", function()
    describe("/all", function()
        it("' /all ' in middle is stripped, and removes one whitespace char (after)", function()
            local includes = prompts.parse_includes("foo /all bar")
            assert.is_true(includes.all)
            assert.are_equal("foo bar", includes.cleaned_prompt)
        end)
        it("'/all ' at start is stripped with whitespace (after)", function()
            local includes = prompts.parse_includes("/all foo")
            assert.is_true(includes.all)
            assert.are_equal("foo", includes.cleaned_prompt)
        end)
        it("' /all' at end is stripped", function()
            local includes = prompts.parse_includes("foo /all")
            assert.is_true(includes.all)
            assert.are_equal("foo", includes.cleaned_prompt)
        end)
    end)
end)
